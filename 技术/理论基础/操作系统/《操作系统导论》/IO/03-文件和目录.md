# 文件和目录

==关键问题：如何管理持久存储设备==

==操作系统应该如何管理持久存储设备？都需要哪些API？实现有哪些重要方面？==



接下来几章会讨论管理持久数据的一些关键技术，重点是如何提高**性能及可靠性**。但是，我们先从总体上看看API：你在**与UNIX文件系统交互时会看到的接口**。



## 文件和目录

随着时间的推移，存储虚拟化形成了两个关键的抽象。



第一个是**文件**（file）。文件就是一个线性字节数组，每个字节都可以读取或写入。每个文件都有某种低级名称（low-level name），通常是某种数字——通常称为**inode**号。

在大多数系统中，操作系统不太了解文件的结构（例如，它是图片、文本文件还是C代码）。相反，文件系统的责任仅仅是将这些数据永久存储在磁盘上，并确保当你再次请求数据时，得到你原来放在那里的内容。



一个目录，像一个文件一样，也有一个低级名字（即inode号），但是它的内容非常具体：它包含一个（**用户可读名字，低级名字**）列表，如:[（“foo”，“10”）,......]

目录中的每个条目都指向文件或其他目录。通过将目录放入其他目录中，用户可以构建任意的目录树。

目录层次结构从根目录（root directory）开始（在基于UNIX的系统中，根目录就记为“/”），并使用某种分隔符（separator）来命名后续子目录（sub-directories），直到命名所需的文件或目录



## 文件系统接口

* 创建文件
* 读写文件
* 读写文件，不按顺序
* fsyn立刻写入
* 文件重命名
* 获取文件信息
* 删除文件
* 创建目录
* 读取目录
* 删除目录
* 硬链接
* 符号链接
* 创建并挂载文件系统



> 操作系统中负责管理和[存储文件](https://baike.baidu.com/item/存储文件/23734835?fromModule=lemma_inlink)信息的软件机构称为[文件管理系统](https://baike.baidu.com/item/文件管理系统/8164847?fromModule=lemma_inlink)，简称文件系统

