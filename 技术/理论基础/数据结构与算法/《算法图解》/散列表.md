## 散列函数

如果用专业术语来表达的话，我们会说，散列函数“将输入映射到数字”。

<img src="assets/%E6%95%A3%E5%88%97%E8%A1%A8/image-20230205160222180.png" alt="image-20230205160222180" style="zoom:50%;" />

散列表是你学习的第一种包含额外逻辑的数据结构。数组和链表都被直接映射到内存，但散列表更复杂，它使用**散列函数**来确定元素的存储位置。

* 散列函数必须是一致的，hash(x) = 固定值
* 应该将不同的输入映射到不同的数字。最理想的情况是，将不同的输入映射到不同的数字

* 在平均情况下，散列表执行各种操作的时间都为O(1)。O(1)被称为常量时间。你以前没有见过常量时间，它并不意味着马上，而是**说不管散列表多大，所需的时间都相同**。

* 在最糟情况下，散列表所有操作的运行时间都为O(n)——线性时间。



## 冲突

给两个键分配的位置相同的情况，称为冲突。

* 散列函数很重要。而最理想的情况是，散列函数将键均匀地映射到散列表的不同位置。
* 如果散列表存储的链表很长，散列表的速度将急剧下降。然而，如果使用的散列函数很好，这些链表就不会很长！

为此，需要避免冲突。而要避免冲突，需要有：

* 较低的填装因子；

* 良好的散列函数。



## 性能

### 填装因子

填装因子度量的是散列表中有多少位置是空的。
$$
填装因子 = 散列表包含的元素数 / 位置总数
$$
填装因子大于1意味着商品数量超过了数组的位置数。一旦填装因子开始增大，你就需要在散列表中添加位置，这被称为调整长度（resizing）。

填装因子越低，发生冲突的可能性越小，散列表的性能越高。一个不错的经验规则是：一旦填装因子大于0.7，就调整散列表的长度。



### 良好的散列函数

良好的散列函数让数组中的值呈均匀分布；糟糕的散列函数让值扎堆，导致大量的冲突。

什么样的散列函数是良好的呢？你根本不用操心——天塌下来有高个子顶着。如果你好奇，可研究一下**SHA函数**。你可将它用作散列函数。



## 总结

你几乎根本不用自己去实现散列表，因为你使用的编程语言提供了散列表实现。你可使用Python提供的散列表，并假定能够获得平均情况下的性能：常量时间。

