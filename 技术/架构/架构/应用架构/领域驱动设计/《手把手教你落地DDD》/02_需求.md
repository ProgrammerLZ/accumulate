# DDD学习——企业管理需求



很多中小型企业都有诸如：

* 考勤管理
* 工时管理
* 项目管理
* 请假管理

等通用的需求。本次的实例应用就是一个针对为中小型企业的企业管理系统。“企业管理”就是要处理的领域。

> Saas应用
>
> 所谓 SaaS，英文全称是 Software-as-a-Service，中文译作“软件即服务”。也就是说，**软件不再像传统上那样交付并安装在客户本地，而是安装到云上，成为客户可以直接使用的服务**。
>
> SaaS 应用往往有个特点：用户五花八门，需求也是复杂多变。有些应用，如果只针对一个企业开发，本来挺简单，一旦放到云上，需求复杂性就会急剧上升。



## 迭代一

### 需求一：租户管理

这个系统可以给多家企业使用，每家企业的数据是隔离的。这些作为客户的企业，在云原生应用里，习惯上叫做“租户（tenant）”。咱们的系统就是要对这些租户进行增删改查等管理。这样的系统叫多租户系统。假设我们做市场调研时，研究了一家叫“零零后科技有限公司”的企业，我们这个迭代，就先来满足这家企业的需求。



### 需求二：人员与组织管理

* 零零后公司有多个开发中心，每个开发中心下有多个开发组。此外，还有公司直属的人事部、财务部等部门，系统要能够管理这些部门。

* 我们对员工也要进行增删改查，并且把员工分配到部门。**每个员工只能属于一个部门**，比如王小牛属于开发一组。

下面这个图说明了需求中的人员和组织结构：

![img](assets/%E9%9C%80%E6%B1%82/0dd03878fd449eb774040bbcd6ab6e55.jpg)



### 需求三：项目管理

首先，租户要向它的客户提供服务，就要和客户签订合同，然后完成合同下的项目。比如说，租户零零后公司的客户可能包括安安保险公司、开心电信等等。那么，租户零零后公司就得为安安保险公司，安排一堆程序员帮他们开发核心保险系统项目，也得为开心电信，安排几个咨询师帮他们的敏捷转型做咨询。

* 一个租户企业可以有多个客户，可以在系统里对客户信息进行增删改查，每个客户都有一个客户经理来跟进；
* 租户可以和它的客户签订多份合同，在系统中对合同信息进行增删改查，每个合同都有一个销售人员负责，可以开始和结束合同；
* 一个合同下可以有多个项目，系统可以对项目进行增删改查，每个项目有一个项目经理；
* 可以在系统中开始和结束项目，需要记录开始和结束时间等信息。项目结束以后，很多事情就不能随便做了。

下图说明了客户、合同、项目等概念的关系：

![img](assets/%E9%9C%80%E6%B1%82/cf692b1b743f8eb6838670427ayyde45.jpg)



### 需求四：人员分配

有了项目，我们就可以把员工分配到项目上，也可以让一个人退出项目。

而且，一个项目可以有多个人参与，一个人又可以同时参与多个项目。除了这些，我们在把人分配到项目上的时候，还要记录每个人预计的投入百分比。比如说，王小牛在 A 项目上准备投入自己 30% 的时间，同时在 B 项目准备投入 40% 的时间等等。之所以要记录预计的投入时间，是为了让企业能够在总体上调配人力资源。比如说管理人员看到王小牛还有 30% 的空余时间，就可以把它同时再安排到另一个项目上，以便实现“内卷最大化”。

![img](assets/%E9%9C%80%E6%B1%82/ec5acb036d224bde8fa6fb6df27d492b.jpg)



### 需求五：工时登记

我们这里规定只有当一个员工分配到一个项目上以后，才能通过这个项目报工时。这样的规定，一来是为了符合公司的管理要求，一个员工不能随意参加一个项目；二来也可以防止员工不小心把工时填到错误的项目上。而且每个员工每周都需要在系统中填报工时，登记自己哪一天在哪个项目上投入了多少时间。当然，员工可对工时进行查询和修改，还可以为每天的投入的时间填写备注。



![img](assets/02_%E9%9C%80%E6%B1%82/f99ae298f25c658b8a57e5980cfc7326.jpg)