```shell
#检查docker资源占用情况
docker system df

#检查容器占用目录大小
docker ps -a --format '{{.ID}}\t{{.Names}}\t{{.Status}}\t{{.Size}}'

#查询overlay2占用子目录的大小
du -h /var/lib/docker/overlay2 | sort -h | tail -n 10

#检查容器日志大小
find /var/lib/docker/containers/ -name "*.log" -exec du -sh {} \;
```



## 镜像拉取

### 指定secret拉取

```shell
#!/bin/bash

IMAGE=$1

# 创建临时 Docker 配置目录
TEMP_DIR=$(mktemp -d)
chmod 700 "$TEMP_DIR"  # 或 chmod 700，确保当前用户可写

export DOCKER_CONFIG="$TEMP_DIR"

touch $DOCKER_CONFIG/config.json

# 提取并写入 config.json
echo '{"auths":{"registry.cn-zhangjiakou.aliyuncs.com":{"username":"registry@zytec","password":"zytec@712"}}}' > "$DOCKER_CONFIG/config.json"

# 现在可以拉取镜像了！
docker pull $IMAGE

# 清理（可选，脚本退出自动删除）
rm -rf "$TEMP_DIR"
```



## 运行镜像

### 挂载卷

```shell
docker run -v /host/path:/container/path image-name
docker run -v /host/path:/container/path image-name -it /bin/bash
```

