## 背包问题

4磅的背包，要偷3样商品，3样商品的价格和重量如下，问：怎样偷才能让价值最大化？

![image-20230211172707946](assets/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/image-20230211172707946.png)





最简单的算法如下：尝试各种可能的商品组合，并找出价值最高的组合。

算法运行时间为：$O(2^n)$

随着要偷的商品的数量的增多，算法将会越来越慢。





可采用动态规划，解决背包问题。

动态规划：

* 动态规划从小问题着手，逐步解决大问题。
* 使用动态规划，要么考虑拿走整件物品，要么选择都不拿。
* 仅当每个子问题都是**离散的**，即不依赖于其他子问题时，动态规划才管用。
* 根据动态规划算法的设计，最多只需合并两个子背包，即根本不会涉及两个以上的子背包。
* 最优解的情况下，背包也有可能装不满





可以将背包问题整理成如下的格子：

<img src="assets/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/image-20230211173047679.png" alt="image-20230211173047679" style="zoom:50%;" />

执行每一个格子，到了任意格子都问，能否装下要偷的商品（当前行的商品）。

在当前行，可偷的商品都为当前行商品以及之前各行的商品。





背包问题计算公式：
$$
当前格子最大价值 = MAX（上一行当前列格子的价值，当前商品的价值 + 当前格子剩余空间的价值）
$$

$$
cell[i][j] = MAX(cell[i-1][j],cell[i][j] + cell[i-1][j-当前商品的重量])
$$





问；为什么要计算小背包可装入的商品的最大值呢？

答：余下了空间时，你可根据这些子问题的答案来确定余下的空间可装入哪些商品。

